# freelance-earnings-analyzer

Система анализа статистических данных о доходах фрилансеров с использованием LangChain, OpenAI GPT-4 и современного менеджера окружений uv.

## Описание

Этот проект — интеллектуальный анализатор данных, который:

- Обрабатывает вопросы на естественном языке
- Анализирует данные о доходах фрилансеров
- Предоставляет структурированные ответы с помощью LLM
- Поддерживает интерактивный CLI-режим
- Использует best practices архитектуры LangChain

## Технологии

- **LangChain** — фреймворк для работы с LLM
- **OpenAI GPT-4o-mini** — языковая модель для анализа
- **Pandas** — обработка данных
- **Typer** — CLI-интерфейс
- **Rich** — красивый вывод в терминале
- **uv** — быстрый менеджер виртуальных окружений и зависимостей

## Установка

1. Установите [uv](https://github.com/astral-sh/uv):

```bash
# На Linux/macOS через curl
curl -LsSf https://astral.sh/uv/install.sh | sh
# или через pipx
pipx install uv
```

2. Создайте виртуальное окружение и активируйте его:

```bash
uv venv
source .venv/bin/activate  # Linux/Mac
# или
.venv\Scripts\activate  # Windows
```

3. Установите зависимости проекта:

```bash
uv sync
```

4. Создайте файл `.env` с вашим API-ключом OpenAI:

```env
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.0
OPENAI_MAX_TOKENS=1000
```

## Использование

### Командный интерфейс

1. **Справка по командам:**

```bash
run --help
```

2. **Проверка состояния конфигурации:**

```bash
run validate
```

3. **Интерактивный режим:**

```bash
run analyze -i
```

4. **Одиночный вопрос:**

```bash
run analyze -q "Насколько выше доход у фрилансеров, принимающих оплату в криптовалюте?"
```

5. **Информация о данных:**

```bash
run info
```

6. **Демонстрация:**

```bash
run demo
```
![example](https://github.com/user-attachments/assets/c067bae7-54bd-4f58-8a7c-3ee7ffb578d9)

## Тестирование

Для запуска тестов используйте:

```bash
pytest
```

Тесты лежат в директории `tests/` и покрывают основные сценарии анализа и CLI.

## Архитектура

```bash
src/
├── config/            # Конфигурация LLM
├── models/            # Анализатор данных
├── chains/            # LangChain-цепочки
├── cli/               # CLI-интерфейс
├── document_loaders/  # Загрузчики данных (CSV и др.)
├── memory/            # Модуль памяти для истории
└── main.py            # Точка входа
```

### Основные компоненты:

- **CLI Interface** — пользовательский интерфейс
- **FreelancerAnalysisChain** — LangChain-цепочка с LLM и памятью
- **FreelancerCSVLoader** — загрузка данных из CSV
- **FreelancerDataAnalyzer** — анализ данных pandas
- **SessionMemory** — простейшая память для истории вопросов/ответов

## Настройка

Вы можете настроить поведение системы через переменные окружения:

```env
# API ключ OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# Модель OpenAI
OPENAI_MODEL=gpt-4o-mini  

# Параметры генерации
OPENAI_TEMPERATURE=0.0    # креативность
OPENAI_MAX_TOKENS=1000    # Максимум токенов в ответе
```

## Возможности анализа

- Анализ доходов по способам оплаты
- Региональное распределение доходов
- Статистика экспертов и их проектов
- Сравнение криптоплатежей с традиционными способами
- Анализ успешности и рейтингов
- Интерактивные запросы на естественном языке

## Best Practices

- Использование uv для управления окружением и зависимостями
- Модули document_loaders и memory для расширяемости
- Централизованная обработка ошибок
- Чистая архитектура и покрытие тестами
- Легко расширяемая CLI-структура

---
